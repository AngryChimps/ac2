datastores:
  - name: riak_ds
    type: primary
    method: riak2_map
  - name: es_ds
    type: secondary
    method: es_document

primary_keys:
  - id

fields:
  - name: id
    type: Uuid
    auto_generate: true
  - name: company_id
    type: Uuid
    riak:
        indexed: true
  - name: staff_ids #used to preserve order of display
    type: Uuid[]
    riak:
        indexed: true
  - name: name
    type: string
    validations:
        - Length:
            min: 2
            max: 25
  - name: company_name
    type: string
  - name: is_mobile
    type: bool
    riak:
        indexed: true
  - name: mobile_radius_miles
    type: float
  - name: photos
    type: string[]
  - name: services
    type: int[]
  - name: walk_ins
    type: bool
  - name: emergencies
    type: bool
  - name: animals
    type: int[]
  - name: address
    type: \Norm\Address
  - name: hours
    type: \Norm\Hours
  - name: rating_count
    type: Counter
    riak:
        indexed: true
  - name: rating_total
    type: Counter
  - name: rating_avg
    type: float
    default: 0
    riak:
        indexed: true
  - name: status
    type: enum
    values:
        - Active
        - Deleted
        - PartiallyConfigured
    riak:
        indexed: true
  - name: created_by
    type: Uuid
  - name: created_at
    type: DateTime
    riak:
        indexed: true
  - name: updated_at
    type: DateTime
    riak:
        indexed: true

api_public_fields:
  - id
  - staff_ids
  - name
  - is_mobile
  - mobile_radius_miles
  - photos
  - services
  - animals
  - address
  - hours
  - walk_ins
  - emergencies

api_private_fields:
  - status

api_hidden_but_settable_fields:
  - company_id

